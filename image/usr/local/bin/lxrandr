#!/bin/bash
# Configure screen resolution and restart x11vnc

# Author: Xiangmin Jiao <xmjiao@gmail.com>
# Copyright Xiangmin Jiao 2017--2022. All rights reserved.

OLD_RESOLUT=$(xrandr -q 2> /dev/null | grep connected | cut --delimiter " " -f 3)

/usr/bin/lxrandr || true

NEW_RESOLUT=$(xrandr -q 2> /dev/null | grep connected | cut --delimiter " " -f 3)

# If resolution changes, kill x11vnc so that it can be restarted in startvnc.sh
if [ "$OLD_RESOLUT" != "$NEW_RESOLUT" ]; then
    kill $X11VNC_PID 2> /dev/null
fi
